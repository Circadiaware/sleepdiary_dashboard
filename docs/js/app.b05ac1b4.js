(function(t){function e(e){for(var n,o,r=e[0],l=e[1],c=e[2],u=0,_=[];u<r.length;u++)o=r[u],Object.prototype.hasOwnProperty.call(s,o)&&s[o]&&_.push(s[o][0]),s[o]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);d&&d(e);while(_.length)_.shift()();return a.push.apply(a,c||[]),i()}function i(){for(var t,e=0;e<a.length;e++){for(var i=a[e],n=!0,r=1;r<i.length;r++){var l=i[r];0!==s[l]&&(n=!1)}n&&(a.splice(e--,1),t=o(o.s=i[0]))}return t}var n={},s={app:0},a=[];function o(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=t,o.c=n,o.d=function(t,e,i){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(i,n,function(e){return t[e]}.bind(null,n));return i},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/dashboard/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var d=l;a.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"56d7":function(t,e,i){"use strict";i.r(e);i("e260"),i("e6cf"),i("cca6"),i("a79d");var n,s,a=i("2b0e"),o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-app",[i("router-view",{on:{retitle:function(e){t.title=e},busy:function(e){t.busy=!0,t.progress=""},progress:function(e){t.progress=e+"%"},error:function(e){throw t.busy=!1,e},idle:function(e){t.busy=!1}}}),i("v-dialog",{attrs:{width:"400"},model:{value:t.error_dialog,callback:function(e){t.error_dialog=e},expression:"error_dialog"}},[i("v-card",[i("v-card-title",[i("v-icon",{attrs:{large:"",left:""}},[t._v(" mdi-emoticon-sad ")]),t._v(" An error occurred ")],1),i("v-card-text",[t._v(" Something went wrong with the app."),i("br"),t._v(" Please report the issue so we can fix it. "),i("v-list",{attrs:{dense:""}},[i("v-list-group",{scopedSlots:t._u([{key:"activator",fn:function(){return[i("v-list-item-title",[t._v("Advanced")])]},proxy:!0}])},[i("v-list-item",[i("v-list-item-content",{staticStyle:{"word-wrap":"anywhere"}},[t._v(" "+t._s(t.error_text)+" ")])],1)],1)],1)],1),i("v-card-actions",[i("v-btn",{attrs:{color:"primary",width:"50%",text:"",href:t.project_url+"dashboard/issues/new?title=App+threw+an+error&body="+encodeURIComponent(t.error)}},[i("v-icon",[t._v("mdi-bug")]),t._v(" Report this bug ")],1),i("v-btn",{attrs:{color:"primary",width:"50%",text:""},on:{click:t.reload}},[i("v-icon",[t._v("mdi-refresh")]),t._v(" Reload page ")],1)],1)],1)],1),i("v-bottom-navigation",{attrs:{color:"primary",grow:"",fixed:""},model:{value:t.section,callback:function(e){t.section=e},expression:"section"}},[i("v-btn",{attrs:{value:"Load",to:"/"}},[i("span",[t._v("Load")]),i("v-icon",[t._v("mdi-calendar-import")])],1),i("v-btn",{attrs:{value:"Info",to:"/info",disabled:t.need_diary}},[i("span",[t._v("Info")]),i("v-icon",[t._v("mdi-chart-timeline")])],1),i("v-btn",{attrs:{value:"Convert",to:"/convert",disabled:t.need_diary}},[i("span",[t._v("Convert")]),i("v-icon",[t._v("mdi-calendar-export")])],1),i("v-btn",{attrs:{value:"About",to:"/about"}},[i("span",[t._v("About")]),i("v-icon",[t._v("mdi-information")])],1)],1),i("v-overlay",{attrs:{value:t.busy}},[i("v-progress-circular",{attrs:{indeterminate:"",color:"primary",size:"100"}},[t._v(" "+t._s(t.progress)+" ")])],1)],1)},r=[],l=(i("b0c0"),i("e9c4"),i("d81d"),i("7039"),i("8c4f")),c=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-main",{staticStyle:{"padding-bottom":"56px"}},[i("div",{staticStyle:{display:"none"}},[i("input",{ref:"opener",attrs:{type:"file",accept:t.supported_extensions,multiple:""},on:{change:t.add_diaries}})]),i("div",{staticClass:"d-flex flex-column justify-center",staticStyle:{height:"100%",margin:"auto","max-width":"600px"}},[t.diaries.length?i("v-list",{staticStyle:{margin:"auto",padding:"1em"},attrs:{"two-line":""}},t._l(t.diaries,(function(e){var n=e[0],s=e[1],a=e[2];return i("v-list-item",{key:n},[i("v-list-item-avatar",[a.icon?i("v-icon",[t._v(t._s(a.icon))]):a.logo?i("v-img",{attrs:{src:a.logo}}):i("span",[t._v(" "+t._s(a.name.substr(0,1))+" ")])],1),i("v-list-item-content",[i("v-list-item-title",[t._v(t._s(a.title))]),i("v-list-item-subtitle",[t._v("Last updated "+t._s(t.get_last_update(s)))])],1),i("v-list-item-action",{on:{click:function(e){return t.remove_diary(n)}}},[i("v-btn",{attrs:{icon:""}},[i("v-icon",[t._v(" mdi-delete ")])],1)],1)],1)})),1):t._e(),i("div",{class:t.diaries.length?"mt-8 mb-16":"",staticStyle:{"text-align":"center"}},[i("v-btn",{attrs:{color:"primary"},on:{click:function(e){return t.$refs.opener.click()}}},[t._v(" Add a diary or spreadsheet ")]),t.diaries.length?t._e():i("p",{staticClass:"mt-6"},[t._v(" Don't have a diary yet?"),i("br"),i("a",{attrs:{href:t.docs_url+"create"}},[t._v("Create a diary")]),t._v(" or "),i("a",{attrs:{href:"#demo"},on:{click:function(e){e.preventDefault(),t.demo_popup=!0}}},[t._v("try an example")])])],1)],1),i("v-dialog",{attrs:{width:"400"},model:{value:t.demo_popup,callback:function(e){t.demo_popup=e},expression:"demo_popup"}},[i("v-card",[i("v-card-title",{staticClass:"text-h5"},[t._v(" Choose a diary... ")]),i("v-card-text",[t.common_sleep_diaries?i("v-list",[i("v-list-item-group",t._l(t.common_sleep_diaries,(function(e){return i("v-list-item",{key:e.filename,on:{click:function(i){return t.load_demo(e.filename)}}},[i("v-list-item-content",[i("v-list-item-title",{domProps:{textContent:t._s(e.short_title.replace(/^(.)/,(function(t,e){return e.toUpperCase()})))}})],1)],1)})),1)],1):[t._v(" Could not load the list of demo files."),i("br"),t._v(" Please try again later. ")]],2),i("v-card-actions",[i("v-btn",{attrs:{width:"50%",text:"",href:"/resources/common_sleep_diaries"}},[t._v(" Learn more ")]),i("v-btn",{attrs:{color:"primary",width:"50%",text:""},on:{click:function(e){t.demo_popup=!1}}},[i("v-icon",[t._v("mdi-close")]),t._v(" Close ")],1)],1)],1)],1),i("v-dialog",{attrs:{width:"400"},model:{value:t.error,callback:function(e){t.error=e},expression:"error"}},[i("v-card",[i("v-card-title",{staticClass:"text-h5"},[t._v(" Could not load diary ")]),i("v-card-text",[t._v(" This file does not appear to be in a supported format."),i("br"),t._v(" Please try a different file. ")]),i("v-card-actions",[i("v-btn",{attrs:{color:"primary",width:"100%",text:""},on:{click:function(e){t.error=!1}}},[i("v-icon",[t._v("mdi-close")]),t._v(" Close ")],1)],1)],1)],1)],1)},d=[],u=(i("a15b"),i("4e827"),i("4de4"),i("d3b7"),i("ac1f"),i("1276"),i("159b"),i("07ac"),i("841c"),i("fb6a"),i("a434"),function(){try{return window.sessionStorage||{}}catch(e){var t={};return{getItem:function(e){return t[e]},setItem:function(e,i){return t[e]=i}}}}()),_=(u.getItem("dashboard.diary")||"").split("\n").filter((function(t){return t.length})),v=[],m={},p=[],h=[],f={},g=0,b=[],y=0,w=function(t){Object.values(m).forEach((function(e){return e(1==v.length&&0==_.length,t)})),p.forEach((function(e){return e(1==v.length&&0==_.length,t)})),p.length=0},k=new window.DiaryLoader((function(t,e){if(!t.records.length)return w(!0);v.push([g++,t,t.format_info()]),y<b.length?(s=b[y++],k.load([s])):(s=0,b=[],w(!1),e.search&&!e.search(/^hash/)||--n,h&&!n&&(h.forEach((function(t){return t(1==v.length&&0==_.length)})),h=0)),e&&e!==f&&t.to_async("storage-line").then((function(t){_.push(t),u.setItem("dashboard.diary",_.join("\n"))}))}),(function(){var t=function(){return w(!0)},e=s;s=0,window.preprocess_activity_log&&window.Promise?window.preprocess_activity_log(e).then((function(t){k.load("ActivityStart,ActivityEnd\n"+t.map((function(t){return t.ActivityStart+","+t.ActivityEnd})).join("\n")+"\n")}),t):t()}),1);_.length?(n=_.length,_.forEach((function(t){return k.load(t,f)}))):h=0;var x={on_init:function(t){h?h.push(t):t(1==v.length&&0==_.length)},get_diaries:function(){return v},merge_diaries:function(){if(v.length){var t=v[0][1].clone();return v.slice(1).forEach((function(e){return t.merge(e[1])})),t}},add_callback:function(t){p.push(t)},add_permanent_callback:function(t,e){m[t]=e},add_diaries:function(t){b=t.target.files,s=b[0],y=1,k.load([s])},add_demo:function(t){fetch(t).then((function(t){return t.text()})).then((function(t){k.load(t.split("\n").filter((function(t){return t.search(/^2020-(?:1|0[3-9])|^2021/)})).join("\n"))}))},remove_diary:function(t){for(var e=0;e!=v.length;++e)if(v[e][0]==t)return v.splice(e,1),_.splice(e,1),u.setItem("dashboard.diary",_.join("\n")),void w(!1)},clear:function(){u.removeItem("dashboard.diary")}},S="sleepdiary",C="https://"+S+".github.io/",V="https://github.com/"+S+"/",I="../docs/",L={name:"Load",data:function(){return{supported_extensions:window.sleepdiary_engines.map((function(t){return t.extension})).join(",")+",.sqlite,.db,History",sleepdiary_engines:window.sleepdiary_engines.filter((function(t){return"Standard"!=t.name&&"ActivityLog"!=t.name})).sort((function(t,e){return t.title.localeCompare(e.title)})),activity_log:window.sleepdiary_engines.filter((function(t){return"ActivityLog"==t.name}))[0],trigger_rebuild:1,error:!1,docs_url:I,demo_popup:!1,common_sleep_diaries:0}},computed:{diaries:function(){return this.trigger_rebuild&&x.get_diaries()}},mounted:function(){var t=this;this.$emit("retitle","Load diary"),this.$emit("busy"),x.on_init((function(e,i){return t.on_diary_load(e,i)})),x.add_permanent_callback("load",(function(e,i){return t.on_diary_load(e,i)})),fetch("/resources/common_sleep_diaries.json").then((function(t){return t.json()})).then((function(e){return t.common_sleep_diaries=e}))},methods:{on_diary_load:function(t,e){this.$emit("idle"),e?this.error=!0:t?this.$router.push({path:"/info"}):++this.trigger_rebuild},add_diaries:function(t){this.$emit("busy"),x.add_diaries(t)},get_last_update:function(t){for(var e=t.to("Standard").records,i=e.length-1;i>=0;--i){var n=e[i].end||e[i].start;if(n)return(new Date).toISOString().split("T")[0]}return"(never)"},remove_diary:function(t){x.remove_diary(t),++this.trigger_rebuild},load_demo:function(t){this.$emit("busy"),x.add_demo("/resources/common_sleep_diaries/"+t)}}},z=L,T=i("2877"),P=i("6544"),j=i.n(P),D=i("8336"),A=i("b0af"),$=i("99d9"),M=i("169a"),O=i("132d"),E=i("adda"),N=i("8860"),R=i("da13"),B=i("1800"),F=i("8270"),H=i("5d23"),U=i("1baa"),q=i("f6c4"),W=Object(T["a"])(z,c,d,!1,null,null,null),Z=W.exports;j()(W,{VBtn:D["a"],VCard:A["a"],VCardActions:$["a"],VCardText:$["b"],VCardTitle:$["c"],VDialog:M["a"],VIcon:O["a"],VImg:E["a"],VList:N["a"],VListItem:R["a"],VListItemAction:B["a"],VListItemAvatar:F["a"],VListItemContent:H["a"],VListItemGroup:U["a"],VListItemSubtitle:H["b"],VListItemTitle:H["c"],VMain:q["a"]});var G=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-main",{staticStyle:{"padding-bottom":"56px"}},[i("div",{staticClass:"d-flex flex-column justify-center",staticStyle:{height:"100%","max-width":"600px",margin:"auto"}},[i("v-list",[i("v-subheader",[t._v(" Statistics "),i("v-spacer"),i("v-menu",{attrs:{bottom:"",left:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,s=e.attrs;return[i("v-btn",t._g(t._b({attrs:{dark:"",icon:""},on:{click:function(e){t.statistics_tab="root"}}},"v-btn",s,!1),n),[i("v-icon",[t._v("mdi-dots-vertical")])],1)]}}])},[i("v-list",{attrs:{flat:""}},[i("v-list-item-group",{attrs:{multiple:""},model:{value:t.statistics_options,callback:function(e){t.statistics_options=e},expression:"statistics_options"}},[t._l(t.statistics_option_names,(function(e){return[i("v-list-item",{key:e,attrs:{value:e},on:{click:function(t){t.stopPropagation()}},scopedSlots:t._u([{key:"default",fn:function(n){var s=n.active;return[i("v-list-item-action",[i("v-checkbox",{attrs:{"input-value":s}})],1),i("v-list-item-content",[i("v-list-item-title",[t._v("Show "+t._s(t.statistics_option_titles[e]))])],1)]}}],null,!0)})]}))],2)],1)],1)],1),i("v-list-item",[i("v-list-item-content",[t.recent_began?i("v-simple-table",{scopedSlots:t._u([{key:"default",fn:function(){return[i("thead",[i("tr",[i("th"),i("th",{staticStyle:{"text-align":"center"},attrs:{colspan:"3"}},[t._v("Recent")]),i("th",{staticStyle:{"text-align":"center"},attrs:{colspan:"3"}},[t._v("Long-term")]),t.statistics_options.includes("infos")?i("th"):t._e()])]),i("tbody",[i("v-slide-x-transition",[i("tr",{directives:[{name:"show",rawName:"v-show",value:t.statistics_options.includes("infos")&&"dates"==t.stats_info,expression:"statistics_options.includes('infos')&&stats_info=='dates'"}],staticClass:"stats-below",on:{click:function(e){return t.toggle_stats_info("dates")}}},[i("td",{staticStyle:{"text-align":"right"},attrs:{colspan:"8"}},[t._v(" This column is based on your entire diary, from "),i("em",[t._v(t._s(t.long_term_began))]),t._v(" to "),i("em",[t._v(t._s(t.ended))]),t._v("."),i("br"),t._v(" It's useful for spotting long-term trends in your sleeping pattern. ")])])]),i("v-slide-x-transition",[i("tr",{directives:[{name:"show",rawName:"v-show",value:t.statistics_options.includes("infos")&&"dates"==t.stats_info,expression:"statistics_options.includes('infos')&&stats_info=='dates'"}],staticClass:"stats-arrows",on:{click:function(e){return t.toggle_stats_info("dates")}}},[i("td",{attrs:{colspan:"5"}}),i("td",{staticClass:"stats-plus-minus"},[i("v-icon",{attrs:{small:""}},[t._v("mdi-arrow-down-bold")])],1),i("td",{attrs:{colspan:"2"}})])]),i("tr",{on:{click:function(e){return t.toggle_stats_info("dates")}}},[i("th",[i("span",{staticClass:"wide"},[t._v("Date began")]),i("span",{staticClass:"narrow"},[t._v("Began")])]),i("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"3"}},[t._v(t._s(t.recent_began))]),i("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"3"}},[t._v(t._s(t.long_term_began))]),t.statistics_options.includes("infos")?i("td",{staticClass:"hpad-unless-narrow"},[i("v-btn",{attrs:{icon:""}},[i("v-icon",[t._v("mdi-information")])],1)],1):t._e()]),i("v-slide-x-reverse-transition",[i("tr",{directives:[{name:"show",rawName:"v-show",value:t.statistics_options.includes("infos")&&"dates"==t.stats_info,expression:"statistics_options.includes('infos')&&stats_info=='dates'"}],staticClass:"stats-arrows stats-below",on:{click:function(e){return t.toggle_stats_info("dates")}}},[i("td",{attrs:{colspan:"2"}}),i("td",{staticClass:"stats-plus-minus"},[i("v-icon",{attrs:{small:""}},[t._v("mdi-arrow-up-bold")])],1),i("td",{attrs:{colspan:"5"}})])]),i("v-slide-x-reverse-transition",[i("tr",{directives:[{name:"show",rawName:"v-show",value:t.statistics_options.includes("infos")&&"dates"==t.stats_info,expression:"statistics_options.includes('infos')&&stats_info=='dates'"}],on:{click:function(e){return t.toggle_stats_info("dates")}}},[i("td",{attrs:{colspan:"8"}},[t._v(" This column just shows data for the "+t._s(Math.round((new Date(t.ended)-new Date(t.recent_began).getTime())/864e5)+1)+" days between "),i("em",[t._v(t._s(t.recent_began))]),t._v(" and "),i("em",[t._v(t._s(t.ended))]),t._v("."),i("br"),t._v(" It's useful for understanding your situation right now. ")])])]),t._l(t.statistics_options.includes("borings")?t.schedule_list:t.schedule_list.filter((function(t){return!t[6]})),(function(e){return[i("v-slide-x-transition",{key:"above-"+e[3]},[i("tr",{directives:[{name:"show",rawName:"v-show",value:t.statistics_options.includes("infos")&&t.stats_info==e,expression:"statistics_options.includes('infos')&&stats_info==schedules"}],staticClass:"stats-below",on:{click:function(i){return t.toggle_stats_info(e)}}},[e[0]?i("td",{staticStyle:{"text-align":"right"},attrs:{colspan:"8"},domProps:{innerHTML:t._s(t.to_description(e,1))}}):t._e()])]),i("v-slide-x-transition",{key:"down-"+e[3]},[i("tr",{directives:[{name:"show",rawName:"v-show",value:t.statistics_options.includes("infos")&&t.stats_info==e,expression:"statistics_options.includes('infos')&&stats_info==schedules"}],staticClass:"stats-arrows",on:{click:function(i){return t.toggle_stats_info(e)}}},[i("td",{attrs:{colspan:"5"}}),i("td",{staticClass:"stats-plus-minus"},[i("v-icon",{attrs:{small:""}},[t._v("mdi-arrow-down-bold")])],1),i("td",{attrs:{colspan:"2"}})])]),i("tr",{key:"main-"+e[3],style:e[6]?"opacity:0.5":"",on:{click:function(i){return t.toggle_stats_info(e)}}},[i("th",[i("span",{staticClass:"wide"},[t._v(t._s(e[3]))]),i("span",{staticClass:"narrow"},[t._v(t._s(e[4]))])]),e[0]?[i("td",{staticClass:"stats-average"},[t._v(t._s(t.to_value(e[2],e[0].mean)))]),i("td",{staticClass:"stats-plus-minus space-unless-narrow"},[t._v("±")]),i("td",{staticClass:"stats-sd"},[t._v(t._s(t.to_value(1&e[2],e[0].standard_deviation)))])]:i("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"3"}},[t._v(" (no data) ")]),e[1]?[i("td",{staticClass:"stats-average"},[t._v(t._s(t.to_value(e[2],e[1].mean)))]),i("td",{staticClass:"stats-plus-minus space-unless-narrow"},[t._v("±")]),i("td",{staticClass:"stats-sd"},[t._v(t._s(t.to_value(1&e[2],e[1].standard_deviation)))])]:i("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"3"}},[t._v(" (no data) ")]),t.statistics_options.includes("infos")?i("td",{staticClass:"hpad-unless-narrow"},[i("v-btn",{attrs:{icon:""}},[i("v-icon",[t._v("mdi-information")])],1)],1):t._e()],2),i("v-slide-x-reverse-transition",{key:"up-"+e[3]},[i("tr",{directives:[{name:"show",rawName:"v-show",value:t.statistics_options.includes("infos")&&t.stats_info==e,expression:"statistics_options.includes('infos')&&stats_info==schedules"}],staticClass:"stats-arrows stats-below",on:{click:function(i){return t.toggle_stats_info(e)}}},[i("td",{attrs:{colspan:"2"}}),i("td",{staticClass:"stats-plus-minus"},[i("v-icon",{attrs:{small:""}},[t._v("mdi-arrow-up-bold")])],1),i("td",{attrs:{colspan:"5"}})])]),i("v-slide-x-reverse-transition",{key:"below-"+e[3]},[i("tr",{directives:[{name:"show",rawName:"v-show",value:t.statistics_options.includes("infos")&&t.stats_info==e,expression:"statistics_options.includes('infos')&&stats_info==schedules"}],on:{click:function(i){return t.toggle_stats_info(e)}}},[i("td",{attrs:{colspan:"8"},domProps:{innerHTML:t._s(t.to_description(e,0))}})])])]})),i("v-slide-x-transition",[i("tr",{directives:[{name:"show",rawName:"v-show",value:t.statistics_options.includes("infos")&&"tz"==t.stats_info,expression:"statistics_options.includes('infos')&&stats_info=='tz'"}],staticClass:"stats-below",on:{click:function(e){return t.toggle_stats_info("tz")}}},[i("td",{staticStyle:{"text-align":"right"},attrs:{colspan:"8"}},[t.manual_timezone_required?[t._v(" When you wrote "),i("em",[t._v("00:00")]),t._v(" in your diary, where did you mean?"),i("br"),t._v(" It's always midnight somewhere. ")]:[t._v(" Your diary includes the timezone information we need."),i("br"),t._v(" This is "),i("span",{staticStyle:{opacity:"0.5"}},[t._v("grey")]),t._v(" because you don't need to do anything about it. ")]],2)])]),i("v-slide-x-transition",[i("tr",{directives:[{name:"show",rawName:"v-show",value:t.statistics_options.includes("infos")&&"tz"==t.stats_info,expression:"statistics_options.includes('infos')&&stats_info=='tz'"}],staticClass:"stats-arrows",on:{click:function(e){return t.toggle_stats_info("tz")}}},[i("td"),i("td",{staticClass:"stats-plus-minus",attrs:{colspan:"6"}},[i("v-icon",{attrs:{small:""}},[t._v("mdi-arrow-down-bold")])],1),i("td")])]),i("tr",{on:{click:function(e){return t.toggle_stats_info("tz")}}},[i("th",{staticStyle:{height:"0",border:"none"}}),i("td",{staticStyle:{height:"0",border:"none"},attrs:{colspan:"6"}}),t.statistics_options.includes("infos")?i("td",{staticClass:"hpad-unless-narrow",attrs:{rowspan:"3"}},[i("v-btn",{attrs:{icon:""}},[i("v-icon",[t._v("mdi-information")])],1)],1):t._e()]),i("tr",{style:t.manual_timezone_required?"":"opacity:0.5",on:{click:function(e){return t.toggle_stats_info("tz")}}},[i("th",{staticStyle:{"border-bottom":"none"}},[t._v("Diary timezone")]),i("td",{staticStyle:{"border-bottom":"none"},attrs:{colspan:6},on:{click:function(t){t.stopPropagation()}}},[t.manual_timezone_required?i("v-autocomplete",{attrs:{items:t.timezones,rules:t.timezone_rules},model:{value:t.diary_timezone,callback:function(e){t.diary_timezone=e},expression:"diary_timezone"}}):[t._v(" (diary entries already include timezones) ")]],2)]),i("tr",{on:{click:function(e){return t.toggle_stats_info("diary_tz")}}},[i("th",[t._v("Display timezone")]),i("td",{attrs:{colspan:6},on:{click:function(t){t.stopPropagation()}}},[i("v-autocomplete",{attrs:{items:t.timezones,rules:t.timezone_rules},model:{value:t.display_timezone,callback:function(e){t.display_timezone=e},expression:"display_timezone"}})],1)]),i("v-slide-x-reverse-transition",[i("tr",{directives:[{name:"show",rawName:"v-show",value:t.statistics_options.includes("infos")&&"tz"==t.stats_info,expression:"statistics_options.includes('infos')&&stats_info=='tz'"}],staticClass:"stats-arrows stats-below",on:{click:function(e){return t.toggle_stats_info("tz")}}},[i("td"),i("td",{staticClass:"stats-plus-minus",attrs:{colspan:"6"}},[i("v-icon",{attrs:{small:""}},[t._v("mdi-arrow-up-bold")])],1),i("td")])]),i("v-slide-x-reverse-transition",[i("tr",{directives:[{name:"show",rawName:"v-show",value:t.statistics_options.includes("infos")&&"tz"==t.stats_info,expression:"statistics_options.includes('infos')&&stats_info=='tz'"}],on:{click:function(e){return t.toggle_stats_info("tz")}}},[i("td",{attrs:{colspan:"8"}},[t._v(" Times on this page are displayed in this timezone."),i("br"),t._v(" You can use any "),i("a",{attrs:{href:"https://en.wikipedia.org/wiki/List_of_tz_database_time_zones"},on:{click:function(t){t.stopPropagation()}}},[t._v("tz database timezone")]),t._v(". ")])])])],2)]},proxy:!0}],null,!1,1397426152)}):t._e()],1)],1),t.predictable?i("v-subheader",[t._v(" Predict your daytime "),i("v-spacer")],1):t._e(),t.predictable?i("v-list-item",[i("v-list-item-content",[i("div",{staticClass:"mb-4"},[t._v(" When are you likely to be awake for an upcoming appointment? The middle of your latest daytime was "),i("em",[t._v(t._s(t.prediction_midpoint_str))]),t._v(" and your average day length is "),i("em",[t._v(t._s(t.to_duration(t.long_term.summary_days.average)))]),t._v(", so...")]),i("div",[i("v-row",[i("v-col",{attrs:{cols:"1"}}),i("v-col",{attrs:{cols:"5"}},[i("v-menu",{ref:"prediction_date_menu",attrs:{"close-on-content-click":!1,"return-value":t.prediction_date,transition:"scale-transition","offset-y":"","min-width":"auto"},on:{"update:returnValue":function(e){t.prediction_date=e},"update:return-value":function(e){t.prediction_date=e}},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,s=e.attrs;return[i("v-text-field",t._g(t._b({staticClass:"pt-0",attrs:{"prepend-icon":"mdi-calendar",label:"Start from","hide-details":"",readonly:""},model:{value:t.prediction_date,callback:function(e){t.prediction_date=e},expression:"prediction_date"}},"v-text-field",s,!1),n))]}}],null,!1,2308927774),model:{value:t.prediction_date_menu,callback:function(e){t.prediction_date_menu=e},expression:"prediction_date_menu"}},[i("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:t.prediction_date,callback:function(e){t.prediction_date=e},expression:"prediction_date"}},[i("v-spacer"),i("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){t.prediction_date_menu=!1}}},[t._v(" Cancel ")]),i("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){return t.$refs.prediction_date_menu.save(t.prediction_date)}}},[t._v(" OK ")])],1)],1)],1),i("v-col",{staticStyle:{margin:"auto","text-align":"center"},attrs:{cols:"1"}},[t._v("at")]),i("v-col",{attrs:{cols:"5"}},[i("v-menu",{ref:"prediction_time_menu",attrs:{"close-on-content-click":!1,"return-value":t.prediction_time,transition:"scale-transition","offset-y":"","min-width":"auto"},on:{"update:returnValue":function(e){t.prediction_time=e},"update:return-value":function(e){t.prediction_time=e},input:function(e){return t.reset_time_picker(e,t.$refs.prediction_time)}},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,s=e.attrs;return[i("v-text-field",t._g(t._b({staticClass:"pt-0",attrs:{"prepend-icon":"mdi-clock",label:"time","hide-details":"",readonly:""},model:{value:t.prediction_time,callback:function(e){t.prediction_time=e},expression:"prediction_time"}},"v-text-field",s,!1),n))]}}],null,!1,2239259014),model:{value:t.prediction_time_menu,callback:function(e){t.prediction_time_menu=e},expression:"prediction_time_menu"}},[i("v-time-picker",{ref:"prediction_time",attrs:{"no-title":"",scrollable:""},model:{value:t.prediction_time,callback:function(e){t.prediction_time=e},expression:"prediction_time"}},[i("v-spacer"),i("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){t.prediction_time_menu=!1}}},[t._v(" Cancel ")]),i("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){return t.$refs.prediction_time_menu.save(t.prediction_time)}}},[t._v(" OK ")])],1)],1)],1)],1),i("v-row",[i("v-col",{staticStyle:{margin:"auto","font-size":"larger"},attrs:{cols:"1"}},[t._v("+")]),i("v-col",{attrs:{cols:"5"}},[i("v-text-field",{staticClass:"pt-0",attrs:{"prepend-icon":"mdi-counter",label:"days","hide-details":"",type:"number"},model:{value:t.prediction_count,callback:function(e){t.prediction_count=e},expression:"prediction_count"}})],1),i("v-col",{staticStyle:{margin:"auto","text-align":"center","font-size":"larger"},attrs:{cols:"1"}},[t._v("×")]),i("v-col",{attrs:{cols:"5"}},[i("v-text-field",{staticClass:"pt-0",attrs:{"prepend-icon":"mdi-timer",label:"day length","hide-details":"",rules:[function(t){return/^[0-9]+:[0-9]+(?::[0-9]+)?$/.test(t)}]},model:{value:t.prediction_duration,callback:function(e){t.prediction_duration=e},expression:"prediction_duration"}})],1)],1),i("v-row",[i("v-col",{staticStyle:{"font-size":"larger"},attrs:{cols:"1"}},[t._v("=")]),i("v-col",{attrs:{cols:"11",id:"prediction-result"}},[t._v(t._s(t.prediction_result))])],1),i("v-row",[i("v-col",{attrs:{cols:"12"}},[t._v(" ... or build your own prediction model with "),i("a",{attrs:{href:"#generate-predictions"},on:{click:function(e){return e.preventDefault(),t.generate_predictions()}}},[t._v("a sleep spreadsheet")]),t._v(". ")])],1)],1)])],1):t._e(),i("v-list-item-group",[i("v-subheader",[t._v(" Sleep Chart "),i("v-spacer"),i("v-menu",{attrs:{bottom:"",left:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,s=e.attrs;return[i("v-btn",t._g(t._b({attrs:{dark:"",icon:""},on:{click:function(e){t.sleep_chart_tab="root"}}},"v-btn",s,!1),n),[i("v-icon",[t._v("mdi-dots-vertical")])],1)]}}])},[i("v-tabs",{staticStyle:{width:"270px"},attrs:{height:"0"},model:{value:t.sleep_chart_tab,callback:function(e){t.sleep_chart_tab=e},expression:"sleep_chart_tab"}},[i("v-tabs-items",{model:{value:t.sleep_chart_tab,callback:function(e){t.sleep_chart_tab=e},expression:"sleep_chart_tab"}},[i("v-tab-item",{attrs:{transition:!1,value:"root"}},[i("v-list",{attrs:{flat:""}},[i("v-list-item",{on:{click:function(e){e.stopPropagation(),t.sleep_chart_tab="theme"}}},[i("v-list-item-icon",[i("v-icon",[t._v("mdi-theme-light-dark")])],1),i("v-list-item-content",[i("v-list-item-title",[t._v("Theme: "+t._s(t.sleep_chart_theme))])],1),i("v-list-item-action",[i("v-icon",{attrs:{color:"grey lighten-1"}},[t._v("mdi-chevron-right")])],1)],1),i("v-list-item",{on:{click:function(e){e.stopPropagation(),t.sleep_chart_tab="start"}}},[i("v-list-item-icon",[i("v-icon",[t._v("mdi-clock")])],1),i("v-list-item-content",[i("v-list-item-title",[t._v("Start at: "+t._s(t.sleep_chart_start?"6pm":"midnight"))])],1),i("v-list-item-action",[i("v-icon",{attrs:{color:"grey lighten-1"}},[t._v("mdi-chevron-right")])],1)],1),i("v-list-item",{on:{click:function(e){e.stopPropagation(),t.sleep_chart_tab="sort"}}},[i("v-list-item-icon",[i("v-icon",[t._v("mdi-sort-calendar-ascending")])],1),i("v-list-item-content",[i("v-list-item-title",[t._v("Sort by: "+t._s(t.sleep_chart_reverse?"oldest first":"newest first"))])],1),i("v-list-item-action",[i("v-icon",{attrs:{color:"grey lighten-1"}},[t._v("mdi-chevron-right")])],1)],1)],1)],1),i("v-tab-item",{attrs:{transition:!1,value:"theme"}},[i("v-toolbar",{attrs:{flat:""}},[i("v-btn",{attrs:{icon:""},on:{click:function(e){e.stopPropagation(),t.sleep_chart_tab="root"}}},[i("v-icon",[t._v("mdi-arrow-left")])],1),i("v-toolbar-title",[t._v("Choose theme")])],1),i("v-divider"),i("v-list",[i("v-list-item-group",{model:{value:t.sleep_chart_theme,callback:function(e){t.sleep_chart_theme=e},expression:"sleep_chart_theme"}},[i("v-list-item",{attrs:{value:"dark"}},[i("v-list-item-content",[i("v-list-item-title",[t._v("Dark")]),i("v-list-item-subtitle",[t._v("Easier to view in bed")])],1)],1),i("v-list-item",{attrs:{value:"light"}},[i("v-list-item-content",[i("v-list-item-title",[t._v("Light")]),i("v-list-item-subtitle",[t._v("Looks better in print")])],1)],1)],1)],1)],1),i("v-tab-item",{attrs:{transition:!1,value:"start"}},[i("v-toolbar",{attrs:{flat:""}},[i("v-btn",{attrs:{icon:""},on:{click:function(e){e.stopPropagation(),t.sleep_chart_tab="root"}}},[i("v-icon",[t._v("mdi-arrow-left")])],1),i("v-toolbar-title",[t._v("Start time")])],1),i("v-divider"),i("v-list",[i("v-list-item-group",{model:{value:t.sleep_chart_start,callback:function(e){t.sleep_chart_start=e},expression:"sleep_chart_start"}},[i("v-list-item",{attrs:{value:648e5}},[i("v-list-item-content",[i("v-list-item-title",[t._v("6pm")]),i("v-list-item-subtitle",[t._v("Used by many sleep doctors")])],1)],1),i("v-list-item",{attrs:{value:0}},[i("v-list-item-content",[i("v-list-item-title",[t._v("Midnight")]),i("v-list-item-subtitle",[t._v("Used by most lay people")])],1)],1)],1)],1)],1),i("v-tab-item",{attrs:{transition:!1,value:"sort"}},[i("v-toolbar",{attrs:{flat:""}},[i("v-btn",{attrs:{icon:""},on:{click:function(e){e.stopPropagation(),t.sleep_chart_tab="root"}}},[i("v-icon",[t._v("mdi-arrow-left")])],1),i("v-toolbar-title",[t._v("Sort by…")])],1),i("v-divider"),i("v-list",[i("v-list-item-group",{model:{value:t.sleep_chart_reverse,callback:function(e){t.sleep_chart_reverse=e},expression:"sleep_chart_reverse"}},[i("v-list-item",{attrs:{value:!0}},[i("v-list-item-content",[i("v-list-item-title",[t._v("Oldest first")]),i("v-list-item-subtitle",[t._v("Earliest entries will appear at the top")])],1)],1),i("v-list-item",{attrs:{value:!1}},[i("v-list-item-content",[i("v-list-item-title",[t._v("Newest first")]),i("v-list-item-subtitle",[t._v("Latest entries will appear at the top")])],1)],1)],1)],1)],1)],1)],1)],1)],1),i("v-list-item",[i("v-list-item-content",{domProps:{innerHTML:t._s(t.chart_svg[0])},on:{click:function(e){return t.show_svg(t.chart_svg[1],"Recent sleep graph")}}})],1),t.event_svg?[i("v-subheader",[t._v(" Sleep-related events "),i("v-spacer"),i("v-menu",{attrs:{bottom:"",left:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,s=e.attrs;return[i("v-btn",t._g(t._b({attrs:{dark:"",icon:""},on:{click:function(e){t.event_graph_tab="root"}}},"v-btn",s,!1),n),[i("v-icon",[t._v("mdi-dots-vertical")])],1)]}}],null,!1,3692846904)},[i("v-tabs",{staticStyle:{width:"270px"},attrs:{height:"0"},model:{value:t.event_graph_tab,callback:function(e){t.event_graph_tab=e},expression:"event_graph_tab"}},[i("v-tabs-items",{model:{value:t.event_graph_tab,callback:function(e){t.event_graph_tab=e},expression:"event_graph_tab"}},[i("v-tab-item",{attrs:{transition:!1,value:"root"}},[i("v-list",{attrs:{flat:""}},[i("v-list-item",{on:{click:function(e){e.stopPropagation(),t.event_graph_tab="theme"}}},[i("v-list-item-icon",[i("v-icon",[t._v("mdi-theme-light-dark")])],1),i("v-list-item-content",[i("v-list-item-title",[t._v("Theme: "+t._s(t.event_graph_theme))])],1),i("v-list-item-action",[i("v-icon",{attrs:{color:"grey lighten-1"}},[t._v("mdi-chevron-right")])],1)],1),i("v-list-item",{on:{click:function(e){e.stopPropagation(),t.event_graph_tab="lines"}}},[i("v-list-item-icon",[i("v-icon",[t._v("mdi-chart-timeline-variant-shimmer")])],1),i("v-list-item-content",[i("v-list-item-title",[t._v("Show "+t._s(t.event_graph_lines.length)+" lines")])],1),i("v-list-item-action",[i("v-icon",{attrs:{color:"grey lighten-1"}},[t._v("mdi-chevron-right")])],1)],1)],1)],1),i("v-tab-item",{attrs:{transition:!1,value:"theme"}},[i("v-toolbar",{attrs:{flat:""}},[i("v-btn",{attrs:{icon:""},on:{click:function(e){e.stopPropagation(),t.event_graph_tab="root"}}},[i("v-icon",[t._v("mdi-arrow-left")])],1),i("v-toolbar-title",[t._v("Choose theme")])],1),i("v-divider"),i("v-list",[i("v-list-item-group",{model:{value:t.event_graph_theme,callback:function(e){t.event_graph_theme=e},expression:"event_graph_theme"}},[i("v-list-item",{attrs:{value:"dark"}},[i("v-list-item-content",[i("v-list-item-title",[t._v("Dark")]),i("v-list-item-subtitle",[t._v("Easier to view in bed")])],1)],1),i("v-list-item",{attrs:{value:"light"}},[i("v-list-item-content",[i("v-list-item-title",[t._v("Light")]),i("v-list-item-subtitle",[t._v("Looks better in print")])],1)],1)],1)],1)],1),i("v-tab-item",{attrs:{transition:!1,value:"lines"}},[i("v-toolbar",{attrs:{flat:""}},[i("v-btn",{attrs:{icon:""},on:{click:function(e){e.stopPropagation(),t.event_graph_tab="root"}}},[i("v-icon",[t._v("mdi-arrow-left")])],1),i("v-toolbar-title",[t._v("Show lines")])],1),i("v-divider"),i("v-list",{attrs:{flat:""}},[i("v-list-item-group",{attrs:{multiple:""},model:{value:t.event_graph_lines,callback:function(e){t.event_graph_lines=e},expression:"event_graph_lines"}},[t._l(t.event_graph_line_names,(function(e){return[i("v-list-item",{key:e,attrs:{value:e},on:{click:function(t){t.stopPropagation()}},scopedSlots:t._u([{key:"default",fn:function(n){var s=n.active;return[i("v-list-item-action",[i("v-checkbox",{attrs:{"input-value":s}})],1),i("v-list-item-content",[i("v-list-item-title",[t._v("Show "+t._s(t.event_graph_line_title[e]))])],1)]}}],null,!0)})]}))],2)],1)],1)],1)],1)],1)],1),i("v-list-item",[i("v-list-item-content",{domProps:{innerHTML:t._s(t.event_svg)},on:{click:function(e){return t.show_svg(t.event_svg,"Sleep-related events")}}})],1)]:t._e(),i("v-subheader",[t._v("Reports")]),i("v-list-item",[i("v-list-item-icon",[i("v-icon",[t._v("mdi-file-excel")])],1),i("v-list-item-content",{on:{click:function(e){return t.generate_predictions()}}},[i("v-list-item-title",[t._v("Predict upcoming sleeps")]),i("v-list-item-subtitle",[t._v("Spreadsheet based on average day length")])],1)],1),i("v-list-item",[i("v-list-item-icon",[i("v-icon",[t._v("mdi-file-pdf-box")])],1),i("v-list-item-content",{on:{click:function(e){return t.generate_report()}}},[i("v-list-item-title",[t._v("Printable report")]),i("v-list-item-subtitle",[t._v("For sleep doctors")])],1)],1),t.patterns.length?i("v-subheader",[t._v("Possible patterns")]):t._e(),t._l(t.patterns,(function(e){return i("v-list-item",{key:e.id,attrs:{href:t.docs_url+"patterns/"+e.id}},[i("v-list-item-icon",[i("v-icon",[t._v(t._s(e.icon))])],1),i("v-list-item-content",[i("v-list-item-title",[t._v(t._s(e.message))]),i("v-list-item-subtitle",[t._v("See advice about this pattern")])],1)],1)}))],2),i("v-dialog",{attrs:{scrollable:""},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[i("v-card",{attrs:{color:"#000022"}},[i("v-card-title",{staticClass:"text-h5"},[t._v(" "+t._s(t.dialog_title)+" ")]),i("v-card-text",{staticStyle:{"max-height":"70vh","text-align":"center",padding:"0","line-height":"0"},domProps:{innerHTML:t._s(t.dialog_svg)}}),i("v-card-actions",[i("v-btn",{attrs:{width:"50%",text:""},on:{click:t.download_svg}},[i("v-icon",[t._v("mdi-download")]),t._v(" Download ")],1),i("v-btn",{attrs:{color:"primary",width:"50%",text:""},on:{click:function(e){t.dialog=!1}}},[i("v-icon",[t._v("mdi-close")]),t._v(" Close ")],1)],1)],1)],1)],1)],1)])},J=[];i("5319"),i("3ca3"),i("ddb0"),i("2b3d"),i("9861"),i("0eb6"),i("b7ef"),i("8bd4"),i("b680"),i("8ba4"),i("a9e3"),i("99af");function Y(){return new Worker(i.p+"js/info.3b696c1e.worker.js")}var K=36e5,X={name:"Info",data:function(){return{display_timezone:(new Intl.DateTimeFormat).resolvedOptions().timeZone,diary_timezone:(new Intl.DateTimeFormat).resolvedOptions().timeZone,timezones:[(new Intl.DateTimeFormat).resolvedOptions().timeZone],timezone_rules:[function(t){try{return window.tc.zone(t),!0}catch(e){return!1}}],manual_timezone_required:!1,recent_began:"",long_term_began:"",stats_info:0,software_version:"",update_timeout:null,latest_primary_sleep:[],schedule_list:[],prediction_midpoint:0,prediction_midpoint_str:"",prediction_date_menu:!1,prediction_time_menu:!1,prediction_date:"",prediction_time:"",prediction_duration:"",prediction_count:7,chart_svg:["",""],event_svg:"",dialog_svg:["",""],patterns:[],dialog:!1,dialog_title:"",awake_at:0,asleep_at:0,day_length:0,docs_url:I,worker:new Y,statistics_options:["infos","borings"],statistics_option_names:["infos","borings"],statistics_option_titles:{infos:"info buttons",borings:"greyed-out rows"},sleep_chart_tab:"root",sleep_chart_theme:"dark",sleep_chart_start:648e5,sleep_chart_reverse:!0,event_graph_tab:"root",event_graph_theme:"dark",event_graph_lines:["wake","sleep","asleep","day-length"],event_graph_line_names:["wake","sleep","asleep","day-length"],event_graph_line_title:{wake:"wake times",sleep:"fall-asleep times",asleep:"sleep lengths","day-length":"day lengths"}}},mounted:function(){var t=this;this.worker.onmessage=function(e){var i=e.data,n=function(t,e,i,n){return t&&Math.abs(t.average-i)<=n&&e&&Math.abs(e.average-i)<=n},s=function(t,e){return e.standard_deviation>18e6};switch(i[0]){case 0:t.$emit("progress",i[1]);break;case 1:t.timezones=i[1],t.software_version=i[2],t.recent=i[3],t.long_term=i[4],t.event_svg=i[5],t.patterns=i[6],t.chart_svg=[i[7],i[8]],t.prediction_midpoint=i[9],i[10]&&!t.manual_timezone_required&&(t.manual_timezone_required=!0,t.update_settings(t.diary_timezone)),t.recent_began=t.recent.activities[0].id.split("T")[0],t.long_term_began=t.long_term.activities[0].id.split("T")[0],t.ended=t.long_term.activities[t.long_term.activities.length-1].id.split("T")[0],t.schedule_list=[[t.recent.summary_asleep,t.long_term.summary_asleep,1,"Total Sleep Time","Slept for","sleep per day",s(t.recent.summary_asleep,t.long_term.summary_asleep)],[t.recent.schedule.wake,t.long_term.schedule.wake,3,"Wake At","Woke up","wake time",s(t.recent.schedule.wake,t.long_term.schedule.wake)],[t.recent.schedule.sleep,t.long_term.schedule.sleep,3,"Asleep At","Asleep","fall-asleep time",s(t.recent.schedule.sleep,t.long_term.schedule.sleep)],[t.recent.summary_days,t.long_term.summary_days,1,"Day Length","Length","calculated day length",n(t.recent.summary_days,t.long_term.summary_days,864e5,6e5)],[t.recent.sleeps_per_day,t.long_term.sleeps_per_day,0,"Sleeps Per Day","Sleeps","number of sleeps per day",n(t.recent.sleeps_per_day,t.long_term.sleeps_per_day,1,.1)],[t.recent.meds_per_day,t.long_term.meds_per_day,0,"Medications Per Day","Meds","number of medications per day",n(t.recent.sleeps_per_day,t.long_term.sleeps_per_day,0,.1)]],t.update_prediction(),t.prediction_duration=t.to_duration(t.long_term.summary_days.average),t.$emit("idle");break;default:t.$emit("error",i[1]);break}},this.$emit("retitle","Info"),this.update_settings(),x.on_init((function(){x.get_diaries().length?t.update_diary():(t.$emit("idle"),t.$router.replace({path:"/"}))}))},watch:{display_timezone:function(){this.update_settings(),this.update_prediction()},diary_timezone:function(){this.update_settings(this.diary_timezone)},sleep_chart_theme:function(){this.update_settings()},sleep_chart_start:function(){this.update_settings()},sleep_chart_reverse:function(){this.update_settings()},event_graph_theme:function(){this.update_settings()},event_graph_lines:function(){this.update_settings()}},methods:{toggle_stats_info:function(t){var e=this;this.stats_info==t?this.stats_info=0:this.stats_info?(this.stats_info=0,setTimeout((function(){return e.stats_info=t}),350)):this.stats_info=t},reset_time_picker:function(t,e){t&&e&&(e.selectingHour=!0)},fix_timezone:function(t){return new Date(new Intl.DateTimeFormat("sv-SE",{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",dayPeriod:"long",timeZone:this.display_timezone}).format(t))},update_diary:function(){this.worker.postMessage(["diary",x.merge_diaries().to("storage-line")])},generate_predictions:function(){var t=this;window.prediction_spreadsheet(new window.ExcelJS.Workbook,this.recent).xlsx.writeBuffer().then((function(e){return t.download_item("Sleep Predictions.xlsx",URL.createObjectURL(new Blob([e])))}))},generate_report:function(){var t=window.sleepdiary_report({pdf:new window.jspdf.jsPDF,timezone:this.display_timezone,software_version:this.software_version,recent:this.recent,long_term:this.long_term});this.download_item(t.filename,t.pdf.output("datauristring",{filename:t.filename}))},show_svg:function(t,e){this.dialog_svg=t,this.dialog_title=e,this.dialog=!0},download_svg:function(){this.dialog=!1,this.download_item(this.dialog_title+".svg","data:image/svg+xml;base64,"+btoa(this.dialog_svg))},download_item:function(t,e){var i=document.createElement("A");i.setAttribute("download",t),i.setAttribute("href",e),i.click()},to_duration:function(t){t<0&&(t+=864e5);var e=Math.floor(t/K),i=Math.floor(t/6e4)%60;return e+(i<10?":0":":")+i},to_duration_long:function(t){t<0&&(t+=864e5);var e=Math.floor(t/36e5);t%=36e5;var i=Math.floor(t/6e4);t%=6e4;var n=Math.floor(t/1e3),s=[];switch(e){case 0:break;case 1:s.push("1 hour");break;default:s.push(e+" hours")}switch(i){case 0:break;case 1:s.push("1 minute");break;default:s.push(i+" minutes")}if(!e)switch(n){case 0:break;case 1:s.push("1 second");break;default:s.push(n+" seconds")}return s.join(", ")},to_approximate_time:function(t){var e=new Date(t),i=e.getHours(),n=e.toLocaleDateString()+", ";switch(i){case 0:return n+"midnight-01:00";case 9:return n+"0"+i+":00-"+(i+1)+":00";case 23:return n+"23:00-midnight";default:return i<9?n+"0"+i+":00-0"+(i+1)+":00":n+i+":00-"+(i+1)+":00"}},to_value:function(t,e){switch(t){case 0:return e.toFixed(2);default:return this.to_duration(e)}},to_description:function(t,e){var i=function(t){return Number.isInteger(t)?t:t.toFixed(2)},n=function(t){return t-t%6e4},s=function(t){return new Intl.DateTimeFormat("default",{timeZone:"UTC",hour:"numeric",minute:"numeric"}).format(new Date(t))},a=Math.round((new Date(this.ended)-new Date(this.recent_began).getTime())/864e5)+1,o="Your average "+t[5]+(e?' since <span class="stats-amount">'+this.long_term_began:" for the ".concat(a,' days between <span class="stats-amount">').concat(this.recent_began,'</span> and <span class="stats-amount">').concat(this.ended))+"</span> was",r=t[6]?'<br/>This is <span style="opacity:0.5">grey</span> because it isn\'t very informative.':"";if(!t[e]||a<2)return"There isn't enough data to calculate these values just yet - keep logging and it'll start to work!";if(!t[e].standard_deviation)return o+=' always exactly <span class="stats-amount">',t[2]?o+this.to_duration_long(t[e].mean)+"</span>."+r:o+i(t[e].mean)+"</span>."+r;switch(t[2]){case 0:return o+' <span class="stats-amount">'+i(t[e].mean)+'</span>.<br/>It was usually between <span class="stats-amount">'+(t[e].mean>t[e].standard_deviation?i(t[e].mean-t[e].standard_deviation):0)+'</span> and <span class="stats-amount">'+i(t[e].mean+t[e].standard_deviation)+"</span>"+r;case 1:return o+' <span class="stats-amount">'+this.to_duration_long(t[e].mean)+'</span>.<br/>But it was often as short as <span class="stats-amount">'+this.to_duration_long(n(t[e].mean)-n(t[e].standard_deviation))+'</span> or as long as <span class="stats-amount">'+this.to_duration_long(n(t[e].mean)+n(t[e].standard_deviation))+"</span>.<br/>Some weeks, all your days will be near the top or bottom of this range."+r;case 3:return o+' <span class="stats-amount">'+s(t[e].mean)+'</span>.<br/>But it was often as early as <span class="stats-amount">'+s(n(t[e].mean)-n(t[e].standard_deviation))+'</span> or as late as <span class="stats-amount">'+s(n(t[e].mean)+n(t[e].standard_deviation))+"</span>.<br/>Some weeks, all your days will be near the top or bottom of this range."+r}},update_settings:function(t){this.$emit("busy"),this.worker.postMessage(["settings",t,this.display_timezone,this.sleep_chart_theme,this.sleep_chart_start,this.sleep_chart_reverse,this.event_graph_theme,this.event_graph_lines])},update_prediction:function(){var t=new window.tc.DateTime(this.prediction_midpoint,window.tc.zone("Etc/UTC")).toZone(window.tc.zone(this.display_timezone));this.prediction_date=t.year()+"-"+(t.month()<10?"0":"")+t.month()+"-"+(t.day()<10?"0":"")+t.day(),this.prediction_time=t.hour()+":"+(t.minute()<10?"0":"")+t.minute(),this.prediction_midpoint_str=this.prediction_date+", "+this.prediction_time}},computed:{predictable:function(){return this.schedule_list[1]&&this.schedule_list[2]&&this.schedule_list[3]&&!this.schedule_list[3][6]&&this.prediction_midpoint},prediction_result:function(){var t=this.prediction_date.split("-"),e=this.prediction_time.split(":"),i=this.prediction_duration.split(":").map((function(t){return parseInt(t,10)})),n=1e3*(60*(60*i[0]+i[1])+(i[2]||0)),s=parseInt(this.prediction_count,10);return new window.tc.DateTime(parseInt(t[0],10),parseInt(t[1],10),parseInt(t[2],10),parseInt(e[0],10),parseInt(e[1],10),0,0,window.tc.zone(this.display_timezone)).add(new window.tc.Duration(n*s)).format("EEE, dd MMM yyyy HH:mm:ss")}}},Q=X,tt=(i("9e66"),i("c6a6")),et=i("ac7c"),it=i("62ad"),nt=i("2e4b"),st=i("ce7e"),at=i("34c3"),ot=i("e449"),rt=i("0fd9"),lt=i("1f4f"),ct=i("0789"),dt=i("2fa4"),ut=i("e0c7"),_t=i("c671"),vt=i("fe57"),mt=i("aac8"),pt=i("8654"),ht=i("c964"),ft=i("71d9"),gt=i("2a7f"),bt=Object(T["a"])(Q,G,J,!1,null,null,null),yt=bt.exports;j()(bt,{VAutocomplete:tt["a"],VBtn:D["a"],VCard:A["a"],VCardActions:$["a"],VCardText:$["b"],VCardTitle:$["c"],VCheckbox:et["a"],VCol:it["a"],VDatePicker:nt["a"],VDialog:M["a"],VDivider:st["a"],VIcon:O["a"],VList:N["a"],VListItem:R["a"],VListItemAction:B["a"],VListItemContent:H["a"],VListItemGroup:U["a"],VListItemIcon:at["a"],VListItemSubtitle:H["b"],VListItemTitle:H["c"],VMain:q["a"],VMenu:ot["a"],VRow:rt["a"],VSimpleTable:lt["a"],VSlideXReverseTransition:ct["d"],VSlideXTransition:ct["e"],VSpacer:dt["a"],VSubheader:ut["a"],VTabItem:_t["a"],VTabs:vt["a"],VTabsItems:mt["a"],VTextField:pt["a"],VTimePicker:ht["a"],VToolbar:ft["a"],VToolbarTitle:gt["a"]});var wt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-main",{staticStyle:{"padding-bottom":"56px"}},[i("div",{staticClass:"d-flex flex-column justify-center",staticStyle:{height:"100%"}},[i("v-list",{staticStyle:{margin:"auto",padding:"1em",width:"400px","max-width":"100%"},attrs:{"one-line":""}},[t._l(t.sleepdiary_engines,(function(e){return i("v-list-item",{key:e.name,on:{click:function(i){return t.save_with(e)}}},[i("v-list-item-avatar",[e.icon?i("v-icon",[t._v(t._s(e.icon))]):e.logo?i("v-img",{attrs:{src:e.logo}}):i("span",[t._v(" "+t._s(e.name.substr(0,1))+" ")])],1),i("v-list-item-content",[i("v-list-item-title",[t._v(t._s(e.title))])],1)],1)})),i("v-list-item",{on:{click:t.save_as_spreadsheet}},[i("v-list-item-avatar",[i("v-img",{attrs:{src:"https://upload.wikimedia.org/wikipedia/commons/3/34/Microsoft_Office_Excel_%282019%E2%80%93present%29.svg"}})],1),i("v-list-item-content",[i("v-list-item-title",[t._v("Spreadsheet")])],1)],1)],2)],1)])},kt=[],xt=(i("00b4"),{name:"Convert",data:function(){return{sleepdiary_engines:window.sleepdiary_engines.filter((function(t){return!/^(ActivityLog|Standard|Spreadsheet(?:Graph|Table))$/.test(t.name)})).sort((function(t,e){return t.title.localeCompare(e.title)})),format_info:{}}},methods:{save_with:function(t){var e=this;this.$emit("busy"),this.diary.to_async(t.name).then((function(i){return i.to_async("output").then((function(i){e.$emit("idle");var n=document.createElement("a");n.setAttribute("href",window.DiaryLoader.to_url(i)),n.setAttribute("download","diary"+t.extension),n.click()}))}))},save_as_spreadsheet:function(){var t=this;this.$emit("busy"),this.diary.to_async("spreadsheet").then((function(e){t.$emit("idle");var i=document.createElement("a");i.setAttribute("href",URL.createObjectURL(new Blob([e]))),i.setAttribute("download","diary.xlsx"),i.click()}))}},mounted:function(){var t=this;this.$emit("retitle","Save As..."),this.$emit("busy"),x.on_init((function(){t.$emit("idle"),x.get_diaries().length?(t.diary=x.merge_diaries(),t.format_info=t.diary?t.diary.format_info():0):t.$router.replace({path:"/"})}))}}),St=xt,Ct=Object(T["a"])(St,wt,kt,!1,null,null,null),Vt=Ct.exports;j()(Ct,{VIcon:O["a"],VImg:E["a"],VList:N["a"],VListItem:R["a"],VListItemAvatar:F["a"],VListItemContent:H["a"],VListItemTitle:H["c"],VMain:q["a"]});var It=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-main",{staticStyle:{"padding-bottom":"56px"}},[i("div",{staticClass:"d-flex flex-column justify-center",staticStyle:{height:"100%","max-width":"600px",margin:"auto"}},[i("v-list",[i("v-subheader",[t._v("About")]),i("v-list-item",{attrs:{href:t.project_url+"dashboard"}},[i("v-list-item-icon",[i("v-icon",[t._v("mdi-code-tags")])],1),i("v-list-item-content",[i("v-list-item-title",[t._v("Source code")])],1)],1),i("v-list-item",{attrs:{href:t.project_url+"dashboard/blob/main/LICENSE"}},[i("v-list-item-icon",[i("v-icon",[t._v("mdi-copyright")])],1),i("v-list-item-content",[i("v-list-item-title",[t._v("License")])],1)],1),i("v-list-item",{attrs:{href:t.project_url+"dashboard/issues/new"}},[i("v-list-item-icon",[i("v-icon",[t._v("mdi-message")])],1),i("v-list-item-content",[i("v-list-item-title",[t._v("Contact us")])],1)],1)],1)],1)])},Lt=[],zt={name:"Info",data:function(){return{project_url:V,site_url:C}}},Tt=zt,Pt=Object(T["a"])(Tt,It,Lt,!1,null,null,null),jt=Pt.exports;j()(Pt,{VIcon:O["a"],VList:N["a"],VListItem:R["a"],VListItemContent:H["a"],VListItemIcon:at["a"],VListItemTitle:H["c"],VMain:q["a"],VSubheader:ut["a"]}),a["a"].use(l["a"]);var Dt=[{path:"/",name:"Load",component:Z},{path:"/info",name:"Info",component:yt},{path:"/convert",name:"Convert",component:Vt},{path:"/about",name:"About",component:jt}],At=new l["a"]({routes:Dt}),$t=At,Mt={name:"App",data:function(){return{section:"Load",title:"Dashboard",need_diary:!0,busy:!1,progress:void 0,project_url:V,error_dialog:0,error_text:"",error:""}},mounted:function(){var t=this;x.add_permanent_callback("app",(function(){t.need_diary=!x.get_diaries().length})),this.section=$t.currentRoute.name,document.title=this.section+" - Sleep Diary Dashboard",$t.afterEach((function(e){t.busy=!1,t.section=e.name,document.title=t.section+" - Sleep Diary Dashboard"}))},errorCaptured:function(t){this.error_text=JSON.stringify(Object.getOwnPropertyNames(t).map((function(e){return[e,t[e]]})),null," "),this.error="Let us know what you were doing when this bug happened:\n\n\n\n\n\nTechnical information:\nBrowser: "+navigator.userAgent+"\nLocation: "+window.location+"\nError message:\n"+this.error_text,this.error_dialog=!0},methods:{reload:function(){x.clear(),location.reload()}}},Ot=Mt,Et=i("7496"),Nt=i("b81c"),Rt=i("56b0"),Bt=i("a797"),Ft=i("490a"),Ht=Object(T["a"])(Ot,o,r,!1,null,null,null),Ut=Ht.exports;j()(Ht,{VApp:Et["a"],VBottomNavigation:Nt["a"],VBtn:D["a"],VCard:A["a"],VCardActions:$["a"],VCardText:$["b"],VCardTitle:$["c"],VDialog:M["a"],VIcon:O["a"],VList:N["a"],VListGroup:Rt["a"],VListItem:R["a"],VListItemContent:H["a"],VListItemTitle:H["c"],VOverlay:Bt["a"],VProgressCircular:Ft["a"]});var qt=i("f309");a["a"].use(qt["a"]);var Wt=new qt["a"]({theme:{dark:!0}});a["a"].config.productionTip=!1,new a["a"]({vuetify:Wt,router:$t,render:function(t){return t(Ut)}}).$mount("#app")},"9e66":function(t,e,i){"use strict";i("a3db")},a3db:function(t,e,i){}});
//# sourceMappingURL=app.b05ac1b4.js.map